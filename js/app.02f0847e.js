(function(t){function e(e){for(var r,o,l=e[0],a=e[1],c=e[2],f=0,h=[];f<l.length;f++)o=l[f],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);u&&u(e);while(h.length)h.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],r=!0,l=1;l<i.length;l++){var a=i[l];0!==n[a]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=i[0]))}return t}var r={},n={app:0},s=[];function o(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=r,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(i,r,function(e){return t[e]}.bind(null,r));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/TicTacToe/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=a;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"2e5f":function(t,e,i){"use strict";i("5398")},3560:function(t,e,i){},5398:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var r=i("2b0e"),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("TicTacToe")],1)},s=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{attrs:{id:"header"}},[e("div",{staticClass:"buttonGroup"},[e("button",{staticStyle:{"border-right":"solid 1px beige","border-bottom-right-radius":"0","border-top-right-radius":"0"},on:{click:t.changeFirst}},[e("p",{style:t.isAiFirst?"color: brown":"color: deepskyblue"},[t._v("["+t._s(t.isAiFirst?"电脑":"玩家")+"]")]),e("br"),t._v("先手 ")]),e("button",{staticStyle:{"border-left":"solid 1px beige","border-bottom-left-radius":"0","border-top-left-radius":"0"},on:{click:t.changeDifficult}},[e("p",{style:2===t.difficult?"color:red":1===t.difficult?"color:blue":"color:green"},[t._v(" ["+t._s(2===t.difficult?"困难":1===t.difficult?"中等":"简单")+"]")]),e("br"),t._v("难度 ")])]),-2!==t.winner?e("div",{staticClass:"win",style:1===t.winner?"color:aliceblue":-1===t.winner?"color:rgb(113, 206, 168)":""},[t._v(" "+t._s(1===t.winner?"AI获胜":-1===t.winner?"玩家获胜":"平局")+" ")]):e("div",{staticClass:"title"},[t._v("井字棋")]),e("button",{staticClass:"button",on:{click:t.reStart}},[t._v("重新"),e("br"),t._v("开始对局")])]),e("div",{attrs:{id:"main"}},[e("div",{attrs:{id:"table"}},[e("table",{staticClass:"checkerboard"},t._l(this.chess,(function(i,r){return e("tr",{key:r},t._l(i,(function(i,n){return e("td",{key:n,class:t.cellStyle(i),on:{click:function(e){return t.placePiece(r,n,!1)}}},[t._v(t._s(t.cellText(i))+" ")])})),0)})),0)])]),t._m(0)])},l=[function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"footer"}},[e("div",{attrs:{id:"footer-item"}},[e("span",{staticStyle:{"font-family":"arial","font-size":"2vh"}},[t._v("Copyright © 2022 Wenjie Sha"),e("br"),e("span",{staticStyle:{"font-size":"60%","padding-top":"2vh"}},[t._v("Designed for AI🤖 course"),e("br"),t._v("With ❤️ at Xidian University🦄")])])])])}],a=(i("14d9"),{name:"TicTacToe",data(){return{chess:[[0,0,0],[0,0,0],[0,0,0]],allowClick:!0,gameStart:!1,isAiFirst:!1,aiNext:!1,winner:-2,difficult:2,san:[.5,.8,1]}},methods:{randomRange(t,e){return Math.floor(Math.random()*(e-t+1)+t)},getDifferentArr(t,e){for(let i=t.length-1;i>=0;i--)for(let r=0;r<e.length;r++)if(t[i].x===e[r].x&&t[i].y===e[r].y){t.splice(i,1);break}return t},changeFirst(){this.gameStart||(this.isAiFirst=!this.isAiFirst,this.startGame())},changeDifficult(){this.gameStart||(this.difficult=(this.difficult+1)%3)},cellStyle(t){return{noneSelect:0===t,computerSelect:1===t,humanSelect:-1===t}},cellText(t){return-1===t?"◯":1===t?"✕":""},placePiece(t,e,i){if(!this.allowClick&&!i||0!==this.chess[t][e])return;console.log("place",t,e,i);let r=JSON.parse(JSON.stringify(this.chess));i?(r[t][e]=1,this.aiNext=!1,this.allowClick=!0):(this.gameStart||(this.gameStart=!0),r[t][e]=-1,this.aiNext=!0,this.allowClick=!1),this.chess=r},startGame(){if(this.isAiFirst&&!this.gameStart){let t=JSON.parse(JSON.stringify(this.chess)),e=this.randomRange(0,2),i=this.randomRange(0,2);2===this.difficult&&(e=0===Math.floor(2*Math.random())?0:2,i=0===Math.floor(2*Math.random())?0:2),t[e][i]=1,this.chess=t,this.gameStart=!0}},aiEmplace(){let t=-2,e=[],i=[],r=JSON.parse(JSON.stringify(this.chess));for(let l=0;l<3;l++)for(let n=0;n<3;n++)if(0===r[l][n]){i.push({x:l,y:n}),r[l][n]=1;let s=this.abPruneNode(r,-2,2,!1);r[l][n]=0,console.log("ai如果选择",l,n,"最终结果是",1===s?"ai获胜":0===s?"平局":"玩家获胜"),s>t?(t=s,e=[{x:l,y:n}]):s===t&&e.push({x:l,y:n})}let n=this.getDifferentArr(JSON.parse(JSON.stringify(i)),e);console.log(n),console.log(e);let s=Math.random(),o={};s<=this.san[this.difficult]?(console.log("根据概率",this.san[this.difficult],"从最优解选择"),o=e[Math.floor(Math.random()*e.length)]):(console.log("根据概率",1-this.san[this.difficult],"从非最优解选择"),0===n.length?(console.log("随机选择"),o=i[Math.floor(Math.random()*i.length)]):o=n[Math.floor(Math.random()*n.length)]),this.placePiece(o.x,o.y,!0)},reStart(){this.chess=[[0,0,0],[0,0,0],[0,0,0]],this.allowClick=!0,this.gameStart=!1,this.isAiFirst=!1,this.aiNext=!1,this.winner=-2},abPruneNode(t,e,i,r){let n=[];for(let o=0;o<3;o++)for(let e=0;e<3;e++)0===t[o][e]&&n.push({x:o,y:e});let s=this.scoreEvaluate(t);if(0!==s&&2!==s)return s;if(0===s)return 0;for(let o=0;o<n.length;o++){let s=n[o];t[s.x][s.y]=r?1:-1;let l=this.abPruneNode(t,e,i,!r);if(t[s.x][s.y]=0,r){if(e<l&&(e=l),e>=i)return i}else if(i>l&&(i=l),i<=e)return e}return r?e:i},scoreEvaluate(t){if(t[0][0]===t[0][1]&&t[0][1]===t[0][2]&&0!==t[0][0])return t[0][0];if(t[1][0]===t[1][1]&&t[1][1]===t[1][2]&&0!==t[1][0])return t[1][0];if(t[2][0]===t[2][1]&&t[2][1]===t[2][2]&&0!==t[2][0])return t[2][0];if(t[0][0]===t[1][0]&&t[1][0]===t[2][0]&&0!==t[0][0])return t[0][0];if(t[0][1]===t[1][1]&&t[1][1]===t[2][1]&&0!==t[0][1])return t[0][1];if(t[0][2]===t[1][2]&&t[1][2]===t[2][2]&&0!==t[0][2])return t[0][2];if(t[0][0]===t[1][1]&&t[1][1]===t[2][2]&&0!==t[0][0])return t[0][0];if(t[0][2]===t[1][1]&&t[1][1]===t[2][0]&&0!==t[0][2])return t[0][2];for(let e=0;e<3;e++)for(let i=0;i<3;i++)if(0===t[e][i])return 2;return 0}},computed:{},mounted(){this.isAiFirst&&(this.allowClick=!1),this.startGame()},watch:{chess:{handler(){console.log("update");let t=this.scoreEvaluate(this.chess);2===t?this.aiNext&&this.aiEmplace():(this.winner=t,this.allowClick=!1)},deep:!0,immediate:!1}}}),c=a,u=(i("2e5f"),i("2877")),f=Object(u["a"])(c,o,l,!1,null,"50fe05bb",null),h=f.exports,d={name:"App",components:{TicTacToe:h}},p=d,g=(i("f211"),Object(u["a"])(p,n,s,!1,null,null,null)),b=g.exports;r["a"].config.productionTip=!1,new r["a"]({render:t=>t(b)}).$mount("#app")},f211:function(t,e,i){"use strict";i("3560")}});
//# sourceMappingURL=app.02f0847e.js.map